<div class="container m-5">
  <form [formGroup]="selectedDrugForm">
    <input
      class="p-2 border rounded shadow"
      type="text"
      [ngbTypeahead]="searchDrugs" 
      id="drugInput"
      formControlName="selectedDrugName"
      placeholder="Select a drug"
      style="width: 50%;"
    />

    <input
      class="border rounded p-2 shadow mt-2 w-14 ml-2" 
      type="number"
      formControlName="selectedDrugQuantity"
      min="0"
    />

      <!-- Display error message -->
    <div *ngIf="selectedDrugForm.hasError('quantityExceeded')" class="text-red-600 mt-2">
      Selected quantity exceeds available drug quantity.
    </div>
    
    <button 
    class="mt-2 px-2 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 w-14 ml-2" 
    *ngIf="selectedDrugForm.value.selectedDrugQuantity"
    [class.opacity-50]="!selectedDrugForm.value.selectedDrugQuantity"
    [disabled]="!selectedDrugForm.valid"
    (click)="addToCart()"
    > <!-- (click)="addToCart(drugItem)"-->
    ADD
  </button>


  </form>
<!--  -->
  <div class="p-6">
    <table class="table-auto w-full">
      <thead>
        <tr>
            <th class="px-4 py-2">ID</th>
            <th class="px-4 py-2">Name</th>
            <th class="px-4 py-2">quantity</th>
            <th class="px-4 py-2">price</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of drugs">
          <td class="border px-4 py-2">{{ item.id }}</td>
          <td class="border px-4 py-2">{{ item.name }}</td>
          <td class="border px-4 py-2">{{ item.quantity }}</td>
          <td class="border px-4 py-2">{{ item.price }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  
  <app-cart></app-cart>

</div> <!--//EndOf .container -->